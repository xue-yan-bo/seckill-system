# 秒杀系统面试速查表

## 🚀 30秒项目介绍

"这是一个高并发电商秒杀系统，Spring Boot微服务架构，分布式锁防超卖，Redis缓存+RabbitMQ异步提升性能，支持1000+并发，响应200ms以内。"

---

## 📊 关键数据

| 指标 | 数值 |
|------|------|
| 并发支持 | 1000+ |
| TPS | 500+ |
| 响应时间 | P99 < 300ms |
| 缓存命中率 | 95%+ |
| 超卖率 | 0% |

---

## 🔧 技术栈速记

**后端**：Spring Boot + MyBatis Plus + MySQL + Redis + RabbitMQ + Redisson + JWT
**前端**：Vue 3 + Vite + Element Plus + Pinia + Axios

---

## 💡 核心问题速答

### Q: 如何防止超卖？
**A**: 分布式锁（Redisson）+ 乐观锁（version）+ Redis预检

### Q: 如何提升性能？
**A**: Redis缓存预热 + RabbitMQ异步 + 数据库优化
- 响应时间：800ms → 200ms

### Q: 如何限流？
**A**: 自定义注解 + AOP + Redis
- 每个IP每秒最多1次请求

### Q: 消息丢失怎么办？
**A**: 生产者确认 + 消息持久化 + 消费者手动ACK

### Q: Redis宕机怎么办？
**A**: 主从复制 + 哨兵模式 + 降级查询数据库

### Q: 缓存一致性？
**A**: 先更新数据库，再删除缓存 + 设置过期时间

---

## 🏗️ 系统架构速记

```
Vue3前端(3000) 
  ↓
用户服务(8081) 商品服务(8082) 秒杀服务(8083) 订单服务(8084)
  ↓              ↓              ↓              ↓
Redis缓存 + RabbitMQ消息队列 + MySQL数据库
```

---

## 🎯 技术亮点

1. **分布式锁** - Redisson实现，支持自动续期
2. **乐观锁** - version字段，CAS操作
3. **异步处理** - RabbitMQ削峰填谷
4. **缓存策略** - 预热+过期+删除
5. **接口限流** - 滑动窗口算法
6. **微服务** - 4个独立服务模块

---

## 📝 核心代码片段

### 分布式锁
```java
RLock lock = redissonClient.getLock(key);
lock.lock(5, TimeUnit.SECONDS);
try {
    // 业务逻辑
} finally {
    lock.unlock();
}
```

### 乐观锁
```sql
UPDATE tb_product 
SET stock = stock - 1, version = version + 1 
WHERE id = ? AND version = ? AND stock > 0
```

### 限流注解
```java
@RateLimit(time = 1, count = 1)
public Result doSeckill() { }
```

---

## 🎤 面试话术模板

**开场**：
"这是我的秒杀系统项目，主要解决高并发场景下的库存管理问题"

**技术**：
"采用分布式锁防止超卖，Redis缓存和消息队列提升性能"

**效果**：
"支持1000+并发，响应时间200ms以内，零超卖"

**亮点**：
"不只是CRUD，真正考虑了高并发、分布式、性能优化"

---

## ❓ 可追问点准备

✅ 为什么用Redisson？ → 自动续期、可重入
✅ 性能怎么测试的？ → JMeter压测
✅ 如何保证公平性？ → 分布式锁串行化
✅ 数据库如何优化？ → 索引、连接池、乐观锁
✅ 还能怎么优化？ → 分库分表、CDN、读写分离

---

## 📦 模块职责

| 模块 | 端口 | 职责 |
|------|------|------|
| common | - | 工具类、AOP |
| model | - | 实体类 |
| user | 8081 | 登录注册 |
| product | 8082 | 商品管理 |
| seckill | 8083 | 秒杀核心 |
| order | 8084 | 订单处理 |

---

## 🔥 核心流程

```
用户点击
  ↓
限流检查 → 失败返回"频繁"
  ↓
Redis库存检查 → 失败返回"售罄"
  ↓
获取分布式锁 → 失败返回"重试"
  ↓
数据库扣减(乐观锁)
  ↓
Redis扣减
  ↓
发MQ消息
  ↓
返回"成功"
  ↓
异步创建订单
```

---

## 💪 优化效果

| 优化点 | 前 | 后 | 提升 |
|--------|----|----|------|
| 商品查询 | 150ms | 20ms | 86% |
| 秒杀响应 | 800ms | 200ms | 75% |
| 并发量 | 200 | 1000+ | 400% |

---

## 🎓 关键词清单

高并发 • 分布式锁 • 乐观锁 • Redis • RabbitMQ • 微服务 • 限流 • 缓存 • 异步 • 性能优化 • JWT • MyBatis Plus • Spring Boot • Vue3

---

**记住**：自信、诚实、有数据支撑！


